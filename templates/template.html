<!-- templates/template.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Экспорт людей</title>
    <style>
        {{ css_content | safe }}
    </style>
</head>
<body>
    <div class="container">
        <h1>Список людей</h1>
        <table class="people-table">
            <thead>
                <tr>
                    <th width="5%">№</th>
                    <th width="25%">Информация о человеке</th>
                    <th width="40%">Резюме и ссылки</th>
                    <th width="30%">Фотографии</th>
                </tr>
            </thead>
            <tbody>
                {% for person in people %}
                    <tr class="person-row">
                        <td class="number">
                            {{ loop.index }}
                        </td>
                        
                        <td class="person-info">
                            <div class="name-section">
                                {{ person.first_name }} {{ person.last_name }} --> <strong>{{ person.meaningful_first_name }} {{ person.meaningful_last_name }} </strong> ({{ person.person_id }})<br>
                            </div>
                            
                            <div class="username-section">
                                <strong>Username:</strong> {{ person.username }}
                            </div>
                            
                            {% if person.about: %}
                            <div class="about-section">
                                <strong>About:</strong> {{ person.about }}
                            </div>
                            {% endif %}
                            
                            {% if person.personal_channel_title: %}
                            <div class="channel-section">
                                <strong>Канал:</strong> {{ person.personal_channel_title }}<br>
                                <strong>О канале:</strong> {{ person.personal_channel_about }}
                            </div>
                            {% endif %}

                            {% if person.extracted_links: %}
                            <div class="urls-section">
                                <strong>Извлеченные ссылки:</strong>
                                <ul class="urls-list">
                                    {% for url in person.extracted_links %}
                                        <li><a href="{{ url }}" target="_blank">{{ url }}</a></li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endif %}
                            
                            <div class="separator">---------</div>
                            
                            <div class="meaningful-about">
                                {{ person.meaningful_about }}
                            </div>
                            
                            <div class="separator">---------</div>
                        </td>
                        
                        <td class="summary-section">
                            <div class="summary-content">
                                {{ person.summary }}
                            </div>
                            
                            <div class="urls-section">
                                <strong>Ссылки:</strong>
                                <ul class="urls-list">
                                    {% for url in person.urls %}
                                        <li><a href="{{ url }}" target="_blank">{{ url }}</a></li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </td>
                        
                        <td class="photos-section">
                            {% if person.local_photos or person.web_photos %}

                                <!-- Отдельный блок для локальных фото -->
                                {% if person.local_photos %}
                                    <div class="photo-category">
                                        <h4 class="photo-category-title">Локальные фото:</h4>
                                        <div class="photos-grid">
                                            {% for photo_src in person.local_photos %}
                                            <div class="photo-item">
                                                <img src="{{ photo_src }}" alt="Локальное фото" onerror="this.style.display='none'" loading="lazy">
                                            </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                {% endif %}

                                <!-- Отдельный блок для веб-фото -->
                                {% if person.web_photos %}
                                    <div class="photo-category">
                                        <h4 class="photo-category-title">Найденные в интернете:</h4>
                                        <div class="photos-grid">
                                            {% for photo_src in person.web_photos %}
                                            <div class="photo-item">
                                                <img src="{{ photo_src }}" alt="Веб фото" onerror="this.style.display='none'" loading="lazy">
                                            </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                {% endif %}

                            {% else %}
                                <div class="photo-placeholder">Нет фото</div>
                            {% endif %}
                        </td>
                    </tr>
                {% else %}
                    <tr>
                        <td colspan="4" style="text-align: center;">Данные не найдены.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html>