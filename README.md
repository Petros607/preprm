# Проект: Обработка данных с использованием LLM и Perplexity

## Описание

Этот проект позволяет:

1. Подготовить и очистить базу данных.
2. Обрабатывать записи с помощью LLM для получения структурированных данных о людях (имя, фамилия, информация о себе).
3. Выполнять поиск информации через Perplexity и экспортировать результаты в Markdown-файлы.

---

## Подготовка

1. Клонируйте репозиторий:
2. Установите зависимости (пример):
```bash
pip install -r requirements.txt
```
3. Создайте .env файл:
```
DB_HOST=
DB_NAME=
DB_USER=
DB_PASSWORD=
DB_PORT=
OPENROUTER_API_KEY=
LLM_URL=
```
---

## Использование
Запуск скрипта с CLI:
```bash
python main.py --help
```
Выводит справку:
```text
  -h, --help     show this help message and exit
  --clean-db     Очистка и подготовка базы данных
  --llm          Обработка записей через LLM
  --mdsearch     Поиск информации и экспорт в Markdown
  --start START  Начальная позиция записи
  --count COUNT  Количество записей
```
Примеры команд:

```bash
python main.py --clean-db      # Очистка и создание таблиц
python main.py --llm           # Обработка данных через LLM
python main.py --mdsearch      # Поиск информации и экспорт в Markdown
```
---
## Структура проекта
* `main.py` — основной скрипт с CLI и логикой обработки.
* `db.py` — управление базой данных.
* `llm_client.py` — работа с LLM.
* `perp_client.py` — поиск информации через Perplexity.
* `md_exporter.py` — экспорт данных в Markdown.
* `logger.py` — настройка логирования.
* `config.py` — конфигурация проекта.
---
## Логирование
Все действия логируются с информацией о выполненных операциях и ошибках. Логи выводятся в консоль.
---
## Примечание
* Часть SQL-запросов настроено в `main.py`.
* Markdown-файлы создаются с отметкой времени в названии папки.
* При ошибках обновления записей информация логируется через `logger`.
---
